# 字符串函数

```mysql
# 连接s1, s2...sn为一个字符串
select CONCAT("a", "b", "c", "d"); # abcd

# 将字符串从"abcd"中[1, 2]替换为"12", 起始位置从1开始, 如果为0不做替换
select INSERT("abcd", 1, 2, "12"); # 12cd

# 返回最左(右)边的2个字符
select LEFT("abc", 2); # ab
select RIGHT("abc", 2); # bc

# 用字符串pad对str最左(右)边进行填充, 直至长度为n
select LPAD("str", 10, "pad"); # padpadpstr
select RPAD("str", 10, "pad"); # strpadpadp

# 去除空格
LTRIM("str") # 去掉字符串左侧空格
RTRIM("str") # 去掉字符串右侧空格
TRIM("str")  # 去掉字符串两侧空格

# 重复"ab"3次
select REPEAT("ab", 3); # ababab

# 将字符串abc中的a替换为1
select REPLACE("abc", "a", "1");

# 比较字符串
select STRCMP("a", "b"); # -1
select STRCMP("a", "a"); # 0
select STRCMP("b", "a"); # 1

# 取子串, 位置从1开始
select SUBSTRING("abc", 1, 2); # ab
select SUBSTRING("abc", 0, 2); # ""
select SUBSTRING("abc", 1, 100); # ab
```

> 起始位置为1，如果设置为0，很多函数不起作用，返回空串或者原字符串



# 数值函数

| 函数           | 功能                         |
| -------------- | ---------------------------- |
| ABS(x)         | 绝对值                       |
| CEIL(x)        | 返回大于x的最小正整数        |
| FLOOR(x)       | 返回小于x的最大正整数        |
| MOD(x, y)      | 返回x/y的模                  |
| RAND()         | 返回0~1的随机数              |
| ROUND(x, y)    | 返回x四舍五入的有y位小数的值 |
| TRUNCATE(x, y) | 返回x截断为y位小数的结果     |



# 日期和时间函数

```mysql
# 当前日期，时间，时间和日期
mysql> SELECT CURDATE(), CURTIME(), NOW();
+------------+-----------+---------------------+
| CURDATE()  | CURTIME() | NOW()               |
+------------+-----------+---------------------+
| 2019-07-12 | 20:03:50  | 2019-07-12 20:03:50 |
+------------+-----------+---------------------+
1 row in set (0.00 sec)
```



# 流程函数

| 函数            | 功能                            |
| --------------- | ------------------------------- |
| IF(value, t, f) | 如果value为真，返回t，否则返回f |
| IFNULL(a, b)    | 如果a不为空，返回a，否则返回b   |



# 其他常用函数

| DATABASE() | 当前数据库名   |
| ---------- | -------------- |
| VERSION()  | 当前数据库版本 |
| USER()     | 登录用户名     |
| MD5(s)     | 字符串s的md5   |

```mysql
mysql> SELECT CURDATE(), CURTIME(), NOW(), MD5("1");
+------------+-----------+---------------------+----------------------------------+
| CURDATE()  | CURTIME() | NOW()               | MD5("1")                         |
+------------+-----------+---------------------+----------------------------------+
| 2019-07-12 | 20:12:57  | 2019-07-12 20:12:57 | c4ca4238a0b923820dcc509a6f75849b |
+------------+-----------+---------------------+----------------------------------+
```

